<!doctype html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dashboard Admin - Rey's Vegetables</title>
    <style>
        :root{
            --bg:#f2f3f8; --card:#ffffff; /* Kartu diubah putih */
            --primary:#304dc2; /* Biru utama */
            --accent:#6ce82e; /* Hijau (Aksi Sukses) */
            --warning:#f97316; /* Oranye (Aksi Hapus) */
            --muted:#4b5563;
            --maxw:1100px; --radius:12px;
        }
        *{box-sizing:border-box}
        body{margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#0f172a;background:var(--bg)}

        header{background:linear-gradient(90deg,var(--primary),#4a99ed);padding:20px 16px;border-bottom:1px solid var(--primary); color: white;}
        .wrap{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px}
        .brand{display:flex;align-items:center;gap:12px}
        .logo{width:48px;height:48px;border-radius:10px;background:#fefefe;display:flex;align-items:center;justify-content:center;color:var(--primary);font-weight:800; font-size: 24px;}
        h1{font-size:24px;margin:0; color: #fff;}
        .subtitle{color:#eef3f0;font-size:14px}

        main{max-width:var(--maxw);margin:24px auto;padding:0 16px}
        .grid{display:grid;grid-template-columns:1fr 400px; /* Lebar kolom pesanan diperbesar */
            gap:20px; align-items: start;}

        .card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
        .products{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}

        .product{display:flex;gap:16px;align-items:center;padding:15px;border-radius:10px;border:1px solid #eef3f0;background:#fff;box-shadow:0 2px 5px rgba(0,0,0,0.03)}
        .thumb img{width:80px;height:80px;border-radius:8px;object-fit:cover}
        .pinfo{flex-grow:1;}
        .pinfo h3{margin:0 0 4px 0;font-size:17px}
        .meta{color:var(--muted);font-size:13px;}
        .paction{margin-top:8px;display:flex;gap:8px;align-items:center}
        .btn{border:none;padding:8px 12px;border-radius:6px;background:var(--primary);color:#fff;cursor:pointer;font-size:12px;}
        .btn.ghost{background:transparent;border:1px solid var(--primary);color:var(--primary);}
        .btn.delete{background:var(--warning); color: #fff;}

        /* Gaya Khusus Pesanan Admin */
        .order-list{display:flex; flex-direction: column; gap: 15px;}
        .order-item{background:#f8f9fa; border: 1px solid #e2e8f0; border-radius: var(--radius); padding: 15px; position: relative;}
        .order-header{display: flex; justify-content: space-between; margin-bottom: 8px;}
        .order-id{font-size: 14px; font-weight: 700; color: var(--primary);}
        .order-status{font-size: 12px; font-weight: 600; padding: 4px 8px; border-radius: 4px; background: #94a3b8; color: white;}
        .status-baru{background: #ef4444;}
        .status-proses{background: #f59e0b;}
        .status-selesai{background: var(--accent);}

        .customer-info strong{display: block; font-size: 14px; margin-top: 4px;}
        .customer-info small{color: var(--muted); display: block; margin-bottom: 8px;}
        .order-details ul{list-style: none; padding: 0; margin: 8px 0;}
        .order-details li{font-size: 13px; margin-bottom: 2px;}
        .order-total{font-weight: 700; font-size: 16px; margin-top: 10px; padding-top: 5px; border-top: 1px dashed #ccc;}

        .order-actions{display: flex; gap: 8px; margin-top: 12px;}
        .order-actions .btn{padding: 8px 10px; font-size: 13px;}


        @media (max-width:980px){.grid{grid-template-columns:1fr}.products{grid-template-columns:1fr}}
    </style>
</head>
<body>
    <header>
        <div class="wrap">
            <div class="brand">
                <div class="logo"><img src="calon bos.jpg" alt="logo profile" width="70"></div>
                <div>
                    <h1>Dashboard Admin</h1>
                    <div class="subtitle">Rey's Vegetables - Manajemen Produk & Pesanan</div>
                    <div class="subtitle">Admin: Gusti Reyhans | 081312545499</div>
                </div>
            </div>
            <div class="subtitle"><h4>STATUS: ONLINE</h4></div>
        </div>
    </header>

    <main>
        <div class="grid">
            <section class="card">
                <h2>Manajemen Produk</h2>
                <p class="meta" style="color: var(--muted);">Atur stok, harga, dan ketersediaan sayuran di sini.</p>

                <div class="products" role="list">
                    </div>

                <div style="text-align:center; margin-top:25px;">
                    <button class="btn" style="background:var(--accent); color: #0f172a; font-weight: 600;" onclick="addProduct()">➕ Tambah Produk Baru</button>
                </div>
            </section>

            <aside class="card" style="background: #fefefe;">
                <h2 style="color: var(--primary);">Daftar Pesanan Masuk (4)</h2>
                <p class="meta" style="color: var(--muted); margin-bottom: 15px;">Kelola pesanan yang telah dikirim oleh pelanggan.</p>
                
                <div class="order-list">

                    <div class="order-item" data-id="4" data-status="Baru">
                        <div class="order-header">
                            <span class="order-id">#ORD-004D</span>
                            <span class="order-status status-baru">BARU</span>
                        </div>
                        <div class="customer-info">
                            <strong>Nama: Yanto oli samping</strong>
                            <small>No. HP: 085234567890</small>
                            <small>Alamat: Jalan Jend. Sudirman No. 12, Samping Indomaret</small>
                        </div>
                        <div class="order-details">
                            <ul>
                                <li>2x Bayam (@5.000)</li>
                                <li>4x Tempe (@6.000)</li>
                            </ul>
                        </div>
                        <div class="order-total">Total: Rp 34.000 (COD)</div>
                        <div class="order-actions">
                            <button class="btn" style="background: var(--primary);" onclick="updateOrderStatus(4, 'Proses')">Proses</button>
                            <button class="btn delete" onclick="deleteOrder(4)">Hapus</button>
                        </div>
                    </div>
                    
                    <div class="order-item" data-id="1" data-status="Baru">
                        <div class="order-header">
                            <span class="order-id">#ORD-001A</span>
                            <span class="order-status status-baru">BARU</span>
                        </div>
                        <div class="customer-info">
                            <strong>Nama: Ayi Beutik</strong>
                            <small>Alamat: Jl. Anggrek No. 5, Cigasong</small>
                        </div>
                        <div class="order-details">
                            <ul>
                                <li>3x Bayam (@5.000)</li>
                                <li>2x Wortel (@8.000)</li>
                            </ul>
                        </div>
                        <div class="order-total">Total: Rp 31.000 (COD)</div>
                        <div class="order-actions">
                            <button class="btn" style="background: var(--primary);" onclick="updateOrderStatus(1, 'Proses')">Proses</button>
                            <button class="btn delete" onclick="deleteOrder(1)">Hapus</button>
                        </div>
                    </div>

                    <div class="order-item" data-id="2" data-status="Proses">
                        <div class="order-header">
                            <span class="order-id">#ORD-002B</span>
                            <span class="order-status status-proses">DIPROSES</span>
                        </div>
                        <div class="customer-info">
                            <strong>Nama: omon steam</strong>
                            <small>Alamat: Perumahan Indah Blok C10, Majalengka Kota</small>
                        </div>
                        <div class="order-details">
                            <ul>
                                <li>5x Kangkung (@4.500)</li>
                            </ul>
                        </div>
                        <div class="order-total">Total: Rp 22.500 (Transfer)</div>
                        <div class="order-actions">
                            <button class="btn" style="background: var(--accent);" onclick="updateOrderStatus(2, 'Selesai')">Selesai</button>
                            <button class="btn delete" onclick="deleteOrder(2)">Hapus</button>
                        </div>
                    </div>
                    
                    <div class="order-item" data-id="3" data-status="Selesai">
                        <div class="order-header">
                            <span class="order-id">#ORD-003C</span>
                            <span class="order-status status-selesai">SELESAI</span>
                        </div>
                        <div class="customer-info">
                            <strong>Nama: Dani kusen</strong>
                            <small>Alamat: Desa Cibodas, dekat pos ronda</small>
                        </div>
                        <div class="order-details">
                            <ul>
                                <li>2x Tempe (@6.000)</li>
                                <li>1x Bayam (@5.000)</li>
                            </ul>
                        </div>
                        <div class="order-total">Total: Rp 17.000 (COD)</div>
                        <div class="order-actions">
                            <button class="btn" style="background: var(--primary);" disabled>Selesai</button>
                            <button class="btn delete" onclick="deleteOrder(3)">Hapus</button>
                        </div>
                    </div>

                </div>

            </aside>
        </div>
    </main>

    <footer>
        © "Admin Panel" | Dibuat untuk manajemen Rey's Vegetables.
    </footer>

    <script>
        // Data Produk (Menggunakan LocalStorage agar data produk persisten)
        let products = JSON.parse(localStorage.getItem("admin_products")) || [
            { id: 1, name: "Bayam", price: 5000, stock: 50, unit: "ikat", image: "https://pasarsegar.co.id/wp-content/uploads/2020/12/name-222-1.jpg" },
            { id: 2, name: "Kangkung", price: 4500, stock: 40, unit: "ikat", image: "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//96/MTA-10783157/hypermart_daun-kangkung-ikat-150-gr_full01.jpg" },
            { id: 3, name: "Wortel", price: 8000, stock: 30, unit: "kg", image: "https://balifoodstore.com/10-large_default/wortel-500gr.jpg" },
            { id: 4, name: "Tempe", price: 6000, stock: 30, unit: "bungkus", image: "https://i0.wp.com/halalmui.org/wp-content/uploads/2022/07/Fermentasi_Media_Padat_dari_Tempe_sampai_Enzim_11zon.jpg?w=1000&ssl=1" },
            { id: 5, name: "Kol", price: 3000, stock: 33, unit: "kg", image: "https://tse1.mm.bing.net/th?q=manfaat%20sayur%20kol%20mentah" },
        ];

        const productList = document.querySelector(".products");

        // Simpan ke LocalStorage
        function saveProducts() {
            localStorage.setItem("admin_products", JSON.stringify(products));
        }

        // --- FUNGSI MANAJEMEN PRODUK (CRUD) ---

        // Render produk
        function renderProducts() {
            productList.innerHTML = "";
            products.forEach((p) => {
                const item = document.createElement("article");
                item.classList.add("product");
                item.innerHTML = `
                    <div class="thumb">
                        <img src="${p.image}" alt="${p.name}">
                    </div>
                    <div class="pinfo">
                        <h3>${p.name}</h3>
                        <div class="meta">Rp ${p.price.toLocaleString('id-ID')} / ${p.unit} • Stok ${p.stock}</div>
                        <div class="paction">
                            <button class="btn" style="background: var(--primary);" onclick="editProduct(${p.id})">Edit</button>
                            <button class="btn delete" onclick="deleteProduct(${p.id})">Hapus</button>
                        </div>
                    </div>
                `;
                productList.appendChild(item);
            });
        }

        // Create (tambah produk)
        function addProduct() {
            const name = prompt("Nama produk:");
            const price = parseInt(prompt("Harga produk (angka):"));
            const stock = parseInt(prompt("Stok produk (angka):"));
            const unit = prompt("Satuan (kg/ikat/bungkus):");
            const image = prompt("Link gambar produk (URL):");

            if (name && !isNaN(price) && !isNaN(stock) && unit && image) {
                const newProduct = {
                    id: Date.now(),
                    name,
                    price,
                    stock,
                    unit,
                    image
                };
                products.push(newProduct);
                saveProducts();
                renderProducts();
            } else {
                alert("Input tidak valid. Pastikan Harga dan Stok adalah angka.");
            }
        }

        // Update (edit produk)
        function editProduct(id) {
            const p = products.find((prod) => prod.id === id);
            if (!p) return;

            p.name = prompt("Nama produk:", p.name) || p.name;
            p.price = parseInt(prompt("Harga:", p.price)) || p.price;
            p.stock = parseInt(prompt("Stok:", p.stock)) || p.stock;
            p.unit = prompt("Satuan:", p.unit) || p.unit;
            p.image = prompt("Link gambar:", p.image) || p.image;

            saveProducts();
            renderProducts();
        }

        // Delete (hapus produk)
        function deleteProduct(id) {
            if (confirm("Yakin ingin menghapus produk ini?")) {
                products = products.filter((p) => p.id !== id);
                saveProducts();
                renderProducts();
            }
        }

        // --- FUNGSI MANAJEMEN PESANAN (SIMULASI) ---

        // Update status pesanan
        function updateOrderStatus(id, newStatus) {
            const itemElement = document.querySelector(`.order-item[data-id="${id}"]`);
            if (!itemElement) return;

            // Hapus kelas status lama
            itemElement.querySelector('.order-status').classList.remove('status-baru', 'status-proses', 'status-selesai');

            let statusClass;
            let statusText;
            let buttonHTML;

            if (newStatus === 'Proses') {
                statusClass = 'status-proses';
                statusText = 'DIPROSES';
                buttonHTML = `<button class="btn" style="background: var(--accent);" onclick="updateOrderStatus(${id}, 'Selesai')">Selesai</button>`;
            } else if (newStatus === 'Selesai') {
                statusClass = 'status-selesai';
                statusText = 'SELESAI';
                buttonHTML = `<button class="btn" style="background: var(--primary);" disabled>Selesai</button>`;
            } else {
                statusClass = 'status-baru';
                statusText = 'BARU';
                buttonHTML = `<button class="btn" style="background: var(--primary);" onclick="updateOrderStatus(${id}, 'Proses')">Proses</button>`;
            }
            
            // Perbarui tampilan status dan tombol
            itemElement.querySelector('.order-status').textContent = statusText;
            itemElement.querySelector('.order-status').classList.add(statusClass);
            
            // Sisipkan kembali tombol Hapus
            itemElement.querySelector('.order-actions').innerHTML = buttonHTML + `<button class="btn delete" onclick="deleteOrder(${id})">Hapus</button>`;
            
            alert(`Pesanan #${id} diubah status menjadi: ${newStatus}`);
        }

        // Hapus Pesanan
        function deleteOrder(id) {
            if (confirm(`Yakin ingin menghapus Pesanan #${id}? Tindakan ini tidak dapat dibatalkan.`)) {
                const itemElement = document.querySelector(`.order-item[data-id="${id}"]`);
                if (itemElement) {
                    itemElement.remove();
                    alert(`Pesanan #${id} telah dihapus.`);
                }
            }
        }

        // Inisialisasi
        renderProducts();
    </script>
</body>
</html>